from telebot import TeleBot, types
from telebot.types import ReplyKeyboardMarkup, KeyboardButton, Message, Chat
from test import TOKEN

bot = TeleBot(TOKEN)
file_path = 'C:/Users/Anaconda/PycharmProjects/Zerocoder/dist/listbox_contents.txt' # —É–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –ø—É—Ç—å)
bot.state = {}  # —Å–ª–æ–≤–∞—Ä—å –Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—Ç–∞
def load_file(): # –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ listbox_contents.txt,
    print(file_path)
    if file_path:  # –µ—Å–ª–∏ –æ–Ω –∫–æ—Ä–µ–∫—Ç–Ω–æ —É–∫–∞–∑–∞–Ω
        list_box = [] # —Å–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–æ–≤–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        with open(file_path, 'r', encoding='cp1251', errors='ignore') as file:# –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –∏ —á–∏—Ç–∞–µ–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
            for line in file:
                list_box.append(line.strip())   # –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –≤ Listbox
    return list_box # –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω—ã–π –∏–∑ —Ñ–∞–π–ª–∞ —Å–ø–∏—Å–æ–∫

def save_file(items):  # –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤ —Ñ–∞–π–ª
    with open(file_path, 'w', encoding='cp1251') as file:
        for item in items:
            file.write(item + '\n')  # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É (f"{item}\n")

def simulate_start_command(chat_id): # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤—ã–∑–æ–≤–∞ –∫–æ–º–∞–Ω–¥—ã /start
    # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
    message = Message()
    message.chat = Chat(id=chat_id)  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ID —á–∞—Ç–∞
    message.text = "/start"  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

@bot.message_handler(commands=['start', 'help'])
def send_welcome(message):
    items = load_file() # –ø—Ä–∏—Å–≤–∞–µ–≤–∞–µ–º –ø—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ø–∏—Å–æ–∫, –∑–∞–≥—Ä—É–∂–µ–Ω—ã–π –∏–∑ —Ñ–∞–π–ª–∞
    # –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 'start', 'help'.
    bot.reply_to(message, '–ü—Ä–∏–≤–µ—Ç! –Ø –¢–ì-–±–æ—Ç, —è –±—É–¥—É –ø–æ–º–æ–≥–∞—Ç—å —Ç–µ–±–µ —Å —Ç–≤–æ–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∏ —Ü–µ–ª—è–º–∏! \n–£–¥–∞–ª—è—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã–µ –∏ —Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ')
    # —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞`ReplyKeyboardMarkup`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    markup = ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add(KeyboardButton("üéØ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É"))  # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏. –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å —ç–º–æ–¥–∑–∏‚ûï
    for item in items: # –ø–µ—Ä–µ–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞
        markup.add(KeyboardButton(item)) # —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –≤ –≤–∏–¥–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞
    # –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—à–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –∏ –µ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª–∏—Ç—å. –õ–∏–±–æ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é:", reply_markup=markup)

@bot.message_handler(func=lambda message: True)
def handle_message(message):
    items = load_file()  # –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ø–∏—Å–æ–∫, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∏–∑ —Ñ–∞–π–ª–∞

    if message.text in items:  # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –∑–∞–¥–∞—á–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è  # –Ω–∞–ø—Ä–∏–º–µ—Ä:   items: ['–î–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –ø–æ Jango', '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–≥—É –ø–æ Jango', '–°–¥–µ–ª–∞—Ç—å Anki –ø–æ Tkinter', '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–ø–∑–∞–Ω—è—Ç–∏–µ –ø–æ –ø–∞—Ä—Å–∏–Ω–≥—É –∏ Pandas', '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –æ Linux –∏ –ø–∞—Ä—Å–∏–Ω–≥—É']
        # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è, —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –î–ê - –ù–ï–¢ –Ω–∞ –º–µ—Å—Ç–µ –ø—Ä–µ–¥–ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–µ–π –∫–ª–∞–≤—ã
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add(types.KeyboardButton("–î–∞"), types.KeyboardButton("–ù–µ—Ç"))
        bot.send_message(message.chat.id, f'–í—ã –≤—ã–±—Ä–∞–ª–∏: {message.text}. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?',
                         reply_markup=markup)
        bot.last_selected_item = message.text  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∞—Ç—Ä–∏–±—É—Ç–µ

    elif message.text == "–î–∞":  # –µ—Å–ª–∏ –≤—ã–±—Ä–∞–ª –ø–æ –∫–Ω–æ–ø–∫–µ –î–ê - —É–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞
        if hasattr(bot, 'last_selected_item'):  # –µ—Å–ª–∏ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –±–æ—Ç –∞—Ç—Ä–∏–±—É—Ç 'last_selected_item'
            item_to_remove = bot.last_selected_item # –ø—Ä–∏—Å–≤–∞–µ–≤–∞–µ–º –µ–≥–æ –∏–º—è –ø—Ä–µ–º–µ–Ω–Ω–æ–π
            items.remove(item_to_remove) # –∏ —É–¥–∞–ª—è–µ–º —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ items
            bot.send_message(message.chat.id, f'–ë—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞: "{item_to_remove}".') # –æ–ø—Ç–∞–≤–ª—è–µ–º –æ–± —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç-–±–æ—Ç
            del bot.last_selected_item # –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏ —Å–∞–º –∞—Ç—Ä–∏–±—É—Ç –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –æ—á–∏—â–∞–µ–∏ –ø–æ–ª–µ –∞—Ç—Ä–∏–±—É–¥–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã
            save_file(items)  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
            send_welcome(message)  # –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤ –±–æ—Ç–µ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–µ

    elif message.text == "üéØ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É":  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É"
        print("bot.state:", bot.state)
        bot.send_message(message.chat.id, "–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏:")
        bot.state[message.from_user.id] = "waiting_for_task"  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏

    elif message.from_user.id in bot.state and bot.state[message.from_user.id] == "waiting_for_task":
        print("bot.state:", bot.state)
        new_task = message.text
        items.append(new_task)  # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫
        save_file(items)  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
        bot.send_message(message.chat.id, f'–ó–∞–¥–∞—á–∞ "{new_task}" –¥–æ–±–∞–≤–ª–µ–Ω–∞.')  # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        del bot.state[message.from_user.id]  # –£–¥–∞–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        send_welcome(message)  # –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤ –±–æ—Ç–µ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–µ

bot.polling(none_stop=True)# –ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–ø—Ä–∞—à–∏–≤–∞—è —Å–µ—Ä–≤–µ—Ä—ã Telegram –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
# –ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞


#
# @bot.message_handler(func=lambda message: True)
# def handle_message(message):
#     items = load_file()  # –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ø–∏—Å–æ–∫, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∏–∑ —Ñ–∞–π–ª–∞
#     # print('message.text:', message.text)
#     #print('items:', items)
#
#     if message.text in items:  # –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –∑–∞–¥–∞—á–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
#         markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
#         markup.add(types.KeyboardButton("–î–∞"), types.KeyboardButton("–ù–µ—Ç"))
#         bot.send_message(message.chat.id, f'–í—ã –≤—ã–±—Ä–∞–ª–∏: {message.text}. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?',
#                          reply_markup=markup)
#         bot.last_selected_item = message.text  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∞—Ç—Ä–∏–±—É—Ç–µ
#
#     elif message.text == "–î–∞":  # # –µ—Å–ª–∏ –≤—ã–±—Ä–∞–ª –ø–æ –∫–Ω–æ–ø–µ–∫ –î–ê - —É–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞
#         if hasattr(bot, 'last_selected_item'):  # –µ—Å–ª–∏ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –±–æ—Ç –∞—Ç—Ä–∏–±—É—Ç 'last_selected_item'
#             item_to_remove = bot.last_selected_item
#             items.remove(item_to_remove)
#             bot.send_message(message.chat.id, f'–ë—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞: "{item_to_remove}".')
#             del bot.last_selected_item
#             save_file(items)  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
#             send_welcome(message)  # –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤ –±–æ—Ç–µ
#
#     elif message.text == "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É":  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É"
#         bot.send_message(message.chat.id, "–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏:")
#         bot.set_state(message.from_user.id, "waiting_for_task")  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
#         print('hasattr(bot, state):', hasattr(bot, 'state'))
#         print('bot.state.get(message.from_user.id):', bot.state.get(message.from_user.id))
#
#
#     elif hasattr(bot, 'state') and bot.state.get(message.from_user.id) == "waiting_for_task":
#         new_task = message.text
#         items.append(new_task)  # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫
#         print('new_task:', new_task)
#         print('items:', items)
#         save_file(items)  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
#         bot.send_message(message.chat.id, f'–ó–∞–¥–∞—á–∞ "{new_task}" –¥–æ–±–∞–≤–ª–µ–Ω–∞.')  # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
#         del bot.state[message.from_user.id]  # –£–¥–∞–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è




# @bot.message_handler(func=lambda message: True)
# def handle_message(message): # message.text: –î–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –ø–æ Jango - —Ç–æ —á—Ç–æ –≤—ã–±—Ä–∞–ª —Ç–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
#     items = load_file()  # –ø—Ä–∏—Å–≤–∞–µ–≤–∞–µ–º –ø—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ø–∏—Å–æ–∫, –∑–∞–≥—Ä—É–∂–µ–Ω—ã–π –∏–∑ —Ñ–∞–π–ª–∞
#     print('message.text:',message.text)
#     print('items:', items)
#     if message.text in items: # –Ω–∞–ø—Ä–∏–º–µ—Ä:   items: ['–î–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –ø–æ Jango', '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–≥—É –ø–æ Jango', '–°–¥–µ–ª–∞—Ç—å Anki –ø–æ Tkinter', '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–ø–∑–∞–Ω—è—Ç–∏–µ –ø–æ –ø–∞—Ä—Å–∏–Ω–≥—É –∏ Pandas', '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –æ Linux –∏ –ø–∞—Ä—Å–∏–Ω–≥—É']
#         # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è, —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –î–ê - –ù–ï–¢ –Ω–∞ –º–µ—Å—Ç–µ –ø—Ä–µ–¥–∏–¥—É—â–µ–π –∫–ª–∞–≤—ã
#         markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
#         markup.add(types.KeyboardButton("–î–∞"), types.KeyboardButton("–ù–µ—Ç"))
#         bot.send_message(message.chat.id, f'–í—ã –≤—ã–±—Ä–∞–ª–∏: {message.text}. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?',
#                          reply_markup=markup)
#
#         # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∞—Ç—Ä–∏–±—É—Ç–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
#         bot.last_selected_item = message.text # message.text: –î–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –ø–æ Jango - —Ç–æ —á—Ç–æ –≤—ã–±—Ä–∞–ª —Ç–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
#     elif message.text == "–î–∞": # –µ—Å–ª–∏ –æ–Ω –≤—ã–±—Ä–∞–ª –î–ê - —É–¥–∞–ª—è–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞
#         if hasattr(bot, 'last_selected_item'): # –µ—Å–ª–∏ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –±–æ—Ç –∞—Ç—Ä–∏–±—É—Ç 'last_selected_item'
#             item_to_remove = bot.last_selected_item # –ø—Ä–∏—Å–≤–∞–µ–≤–∞–µ–º –µ–≥–æ –∏–º—è –ø—Ä–µ–º–µ–Ω–Ω–æ–π
#             items.remove(item_to_remove) # –∏ —É–¥–∞–ª—è–µ–º —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ items
#             bot.send_message(message.chat.id, f'–ë—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞: "{item_to_remove}".') # –æ–ø—Ç–∞–≤–ª—è–µ–º –æ–± —ç—Ç–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —á–∞—Ç-–±–æ—Ç
#             del bot.last_selected_item  # –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏ —Å–∞–º –∞—Ç—Ä–∏–±—É—Ç –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –æ—á–∏—à–∞–µ–∏ –ø–æ–ª–µ –∞—Ç—Ä–∏–±—É–¥–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã
#             send_welcome(message)  # –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤ –±–æ—Ç–µ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–µ
#             print('message:', message)
#
#             with open(file_path, 'w', encoding='cp1251') as file:
#                 for item in items:
#                     file.write(item + '\n')  # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
#
#         else: # –µ—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
#             bot.send_message(message.chat.id, '–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è.')
#     elif message.text == "–ù–µ—Ç": # –µ—Å–ª–∏ –æ–Ω –≤—ã–±—Ä–∞–ª –ù–ï–¢ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
#         bot.send_message(message.chat.id, '–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ.')
#     else: # –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
#         bot.send_message(message.chat.id, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è.')
#         send_welcome(message) # –í—ã–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ "/start" –≤ —á–∞—Ç-–±–æ—Ç (–∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á)



